{"ast":null,"code":"var _jsxFileName = \"/Users/vinayakrishna/courses/cs648_1/assignment13/src/Products.js\";\nimport React, { Component } from 'react';\nimport Filters from './Filters';\nimport ProductTable from './ProductTable';\nimport ProductForm from './ProductForm';\nlet PRODUCTS = {// '1': {id: 1, category: 'Music', price: '$459.99', name: 'Clarinet'},\n  // '2': {id: 2, category: 'Music', price: '$5,000', name: 'Cello'},\n  // '3': {id: 3, category: 'Music', price: '$3,500', name: 'Tuba'},\n  // '4': {id: 4, category: 'Furniture', price: '$799', name: 'Chaise Lounge'},\n  // '5': {id: 5, category: 'Furniture', price: '$1,300', name: 'Dining Table'},\n  // '6': {id: 6, category: 'Furniture', price: '$100', name: 'Bean Bag'}\n};\n\nclass Products extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: '',\n      products: PRODUCTS\n    };\n    this.handleFilter = this.handleFilter.bind(this);\n    this.handleDestroy = this.handleDestroy.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n  }\n\n  componentDidMount() {\n    fetch(\"/product/get\").then(data => data.json()).then(data => this.setState({\n      products: data\n    }));\n  }\n\n  handleFilter(filterInput) {\n    this.setState(filterInput);\n  }\n\n  handleSave(product) {\n    product.productid = new Date().getTime();\n    this.setState(prevState => {\n      let products = prevState.products;\n      products[product.id] = product;\n      return {\n        products\n      };\n    });\n    product.instock = true;\n    var data = {\n      'product': product\n    };\n    console.log(data);\n    fetch('/product/create', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(response => {\n      console.log(response);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  handleDestroy(productId) {\n    console.log(productId);\n    this.setState(prevState => {\n      let products = prevState.products;\n      delete products[productId];\n      return {\n        products\n      };\n    });\n    fetch(\"/product/delete/\".concat(productId), {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      console.log(response);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"My Inventory\"), React.createElement(Filters, {\n      onFilter: this.handleFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(ProductTable, {\n      products: this.state.products,\n      filterText: this.state.filterText,\n      onDestroy: this.handleDestroy,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(ProductForm, {\n      onSave: this.handleSave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Products;","map":{"version":3,"sources":["/Users/vinayakrishna/courses/cs648_1/assignment13/src/Products.js"],"names":["React","Component","Filters","ProductTable","ProductForm","PRODUCTS","Products","constructor","props","state","filterText","products","handleFilter","bind","handleDestroy","handleSave","componentDidMount","fetch","then","data","json","setState","filterInput","product","productid","Date","getTime","prevState","id","instock","console","log","method","headers","Accept","body","JSON","stringify","response","catch","error","productId","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Filters from './Filters'\r\nimport ProductTable from './ProductTable'\r\nimport ProductForm from './ProductForm'\r\n\r\nlet PRODUCTS = {\r\n    // '1': {id: 1, category: 'Music', price: '$459.99', name: 'Clarinet'},\r\n    // '2': {id: 2, category: 'Music', price: '$5,000', name: 'Cello'},\r\n    // '3': {id: 3, category: 'Music', price: '$3,500', name: 'Tuba'},\r\n    // '4': {id: 4, category: 'Furniture', price: '$799', name: 'Chaise Lounge'},\r\n    // '5': {id: 5, category: 'Furniture', price: '$1,300', name: 'Dining Table'},\r\n    // '6': {id: 6, category: 'Furniture', price: '$100', name: 'Bean Bag'}\r\n};\r\n\r\nclass Products extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            filterText: '',\r\n            products: PRODUCTS\r\n        }\r\n        this.handleFilter = this.handleFilter.bind(this)\r\n        this.handleDestroy = this.handleDestroy.bind(this)\r\n        this.handleSave = this.handleSave.bind(this)\r\n    }\r\n\r\n    componentDidMount(){\r\n        fetch(`/product/get`)\r\n        .then(data => data.json())\r\n        .then(data => this.setState({products:data}))\r\n    }\r\n\r\n    handleFilter(filterInput) {\r\n        this.setState(filterInput)\r\n    }\r\n\r\n    handleSave(product) {\r\n        \r\n        product.productid = new Date().getTime()\r\n\r\n        this.setState((prevState) => {\r\n            let products = prevState.products\r\n            products[product.id] = product\r\n            return { products }\r\n        })\r\n\r\n        product.instock = true;\r\n        var data = {'product' : product}\r\n        console.log(data)\r\n\r\n        fetch('/product/create',{\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                        'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(response => {\r\n            console.log(response)\r\n        })\r\n        .catch(error =>{\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    handleDestroy(productId) {\r\n        console.log(productId)\r\n\r\n        this.setState((prevState) => {\r\n            let products = prevState.products\r\n            delete products[productId]\r\n            return { products }\r\n        });\r\n\r\n        fetch(`/product/delete/${productId}`,{\r\n            method: 'DELETE',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                        'Content-Type': 'application/json',\r\n            }\r\n        }).then(response => {\r\n            console.log(response)\r\n        })\r\n        .catch(error =>{\r\n            console.log(error)\r\n        })\r\n\r\n\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div>\r\n                <h1>My Inventory</h1>\r\n                <Filters \r\n                    onFilter={this.handleFilter}></Filters>\r\n                <ProductTable \r\n                    products={this.state.products}\r\n                    filterText={this.state.filterText}\r\n                    onDestroy={this.handleDestroy}></ProductTable>\r\n                <ProductForm\r\n                    onSave={this.handleSave}></ProductForm>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Products"]},"metadata":{},"sourceType":"module"}